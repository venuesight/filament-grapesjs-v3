document.addEventListener("alpine:init",()=>{Alpine.data("grapesjs",({state:r,statePath:f,readOnly:m,tools:c,minHeight:p,container:a,plugins:s,settings:e,pluginsOpts:n})=>({instance:null,state:r,tools:c,plugins:s,settings:e,pluginsOpts:n,init(){let u={},g=this.state?.length>0?JSON.parse(this.state):{},d=g?.projectData??{},h={height:p+"px",container:a||".filament-grapesjs .grapesjs-wrapper",showOffsets:!0,fromElement:!1,projectData:d,noticeOnUnload:!1,storageManager:!1,plugins:s,pluginsOpts:n,selectorManager:{escapeName:i=>i},assetManager:{upload:e?.uploadConfig?.url||!1,uploadName:"files",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},credentials:!1,autoAdd:!1,assets:[]},...e};this.instance=grapesjs.init(h),this.instance.on("update",i=>{let l=this.instance.Pages.getSelected().getMainComponent(),t=this.instance.getHtml({component:l}),o=t.match(/<body\b[^>]*>([\s\S]*?)<\/body>/);o&&(t=o[1]),this.state=JSON.stringify({projectData:this.instance.getProjectData(),style:this.instance.getCss({component:l}),html:t})})}}))});
